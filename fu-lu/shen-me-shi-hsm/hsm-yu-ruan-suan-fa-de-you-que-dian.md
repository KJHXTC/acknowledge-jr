# HSM 与 软算法的优缺点

相对于软算法, HSM具有如下优点

1. 密钥安全性,不会因为应用系统被黑\(非法访问\),而导致密钥泄漏 造成加密数据被非法访问
   * 但并非 100% ,某些情况下 仍可以解密\(例如 弱密钥, 对HSM的访问保护,解密指令不经验证身份等\)
2. 减轻业务开发人员对于数据安全部分的负担, 让业务开发人员更加专心与业务编程
3. 减轻业务系统服务器对于CPU的开销,让业务服务器更多的用于处理业务逻辑
4. 高吞吐量 对于特定的商用算法 DES/3DES/AES/SM4/SHAx/SM3... 数据吞吐量都在  500Mbps+,或受限于网络原因\(目前常规数据中心一般都是 1Gbps的网络环境,极少有 10Gbps+的\)
5. 低延迟,一般的金融交易行为响应都小于 1ms 且并发性能都在 1w tps+
6. 某些HSM厂商会提供HSM配套的 API\(应用编程接口Application Program Interface\) ,只需简单配置即可使用,更加节约了应用系统开发成本,特别对于 大型银行而言,复用率越高重复开发的越少,经济效应也就越好

当然既然是硬件也相应的有如下劣势:

1. 自定义能力有限 

   HSM类硬件大都是根据现有规范/标准封装好接口功能,但对于那些算法定制化高,领先于标准的往往会受制于硬件, 或者需要硬件厂商定制固件,影响开发上线周期. 这种问题是硬件服务器类的通病,对于那些对于性能不怎么看中,但功能/标准超前的\(类似实验性质或者研究性质的\) 软算法可能更适合些但如前文所述,对于密钥的安全性保障 可能有限

2. 高可用性不足

   只要是硬件,就存在故障/突然的不能用 \(断电/网络故障/硬件故障..\), 不像软算法,只要服务器可用就可以持续提供服务

   当然,目前针对此类问题都是有些通用解决方案的

   1. 使用多台设备,一般的都会要求不少于 2台 作为主备
   2. 有的在软件层提供 HA\(部分兼顾负载均衡能力\) 
   3. 部分银行使用平台性质的安全加密服务

3. 厂商绑定

   在没有标准化的应用接口/设备接口时,这类问题在每个领域都会出现, 就行 `H3C`之于`Cisco` 市场推广和占用决定了一切. 早期 HSM 这种东西也一样都属于舶来品. 在国外 是一家 [Thelas](https://www.thalesesecurity.com/products/hsm-management-and-monitoring) 的公司在做, 当然随着国内银行业电子化的改革随着 IBM主机系统的引入业一同引进, 国内的HSM 一般都是国家的几个研究所出品\(这里不多说\). 有的是按照 Thelas 家的命令做的 一般称为`仿雷卡` `Racal Command Set` `雷卡指令集` 就是类似于  `Linux` 称为 `Unix Like` 以及后来中国金卡工程之后国内几个_厂家_ 做的金卡指令集 , 受制于密钥的绑定更替厂商就有风险,因此`指令集`这种的更替就更难了

